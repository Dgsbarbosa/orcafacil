{% load static %}

<!DOCTYPE html>
<html lang="pt">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="{% static 'master.css' %}">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


    {% block extra_css %} {% endblock%}

    <title>{% block title%}{% endblock%}</title>
</head>

<body>
<!-- Barra de navegação -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="/">OrçaFácil</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
            <li class="nav-item active">
                <a class="nav-link" href="#home-advantages">Vantagens </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#home-plans">Planos</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="{% url 'accounts:login' %}">Login</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'accounts:register' %}"><button type="button"
                        class="btn btn-outline-primary">Começar
                        Grátis</button></a>
            </li>
        </ul>
    </div>
</nav>
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="alert 
    {% if message.tags == 'success' %}
        alert-success
    {% elif message.tags == 'error' %}
        alert-danger
    {% else %}
        alert-info
    {% endif %}
">
    {{ message }}
</div>

        {% endfor %}
    </div>
    {% endif %}

    {% block body %}

    {% endblock %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>

    <script src="https://kit.fontawesome.com/5a243ec2c5.js" crossorigin="anonymous"></script>

    <script>
  // Espera 3 segundos e faz as mensagens desaparecerem
  setTimeout(() => {
    const alerts = document.querySelectorAll('.alert');
    alerts.forEach(alert => {
      alert.classList.add('hide');
      // Remove do DOM após a animação
      setTimeout(() => alert.remove(), 500);
    });
  }, 3000); // 3 segundos

function initClientsJS() {
    const tableDiv = document.getElementById('clients-table');
    const searchInput = document.getElementById('input-search-clients');
    const statusSelect = document.getElementById('filter-status');
    const btnFilter = document.getElementById('btn-filter');

    function loadClients() {
        const search = searchInput.value;
        const status = statusSelect.value;

        fetch(`/core/clients/?search=${encodeURIComponent(search)}&status=${encodeURIComponent(status)}`, {
            headers: {'X-Requested-With': 'XMLHttpRequest'}
        })
        .then(res => res.json())
        .then(data => {
            tableDiv.innerHTML = data.html;
        });
    }

    loadClients();
    searchInput.addEventListener('input', loadClients);
    btnFilter.addEventListener('click', loadClients);
}

</script>

<script src="{% static 'core/js/utils.js' %}" defer></script>
<script src="{% static 'core/js/clients.js' %}" defer></script>
<script src="{% static 'core/js/budgets.js' %}" defer></script>
<script src="{% static 'core/js/dashboard.js' %}" defer></script>

{% block js_extra%}
{% endblock %}


</body>

</html>